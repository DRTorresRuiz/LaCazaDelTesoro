<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<style>
      #map {
          height: 650px;
          width: 650px;
          margin: 10px;
      }
</style>
</head>
  <body>
  <table>
    <tr>
        <td style="vertical-align: top">
            <div id="map"><p>Click on the map to add marker.</p></div>
        </td>
        <td>
         {% load widget_tweaks %}
        {% block content %}
              <h2>Game</h2>
              <form method="POST" class="post-form" enctype="multipart/form-data" novalidate>{% csrf_token %}
                <!-- {{ form.as_p }}-->
                  {% for hidden_field in form.hidden_fields %}
                  {{ hidden_field }}
                  {% endfor %}

                  {% if form.non_field_errors %}
                  <div class="alert alert-danger" role="alert">
                    {% for error in form.non_field_errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                  {% endif %}
                  {% for field in form.visible_fields %}
                  <div class="form-group">
                  {{ field.label_tag }}

                {% if form.is_bound %}
                  {% if field.errors %}
                    {% render_field field class="form-control is-invalid" %}
                    {% for error in field.errors %}
                      <div class="invalid-feedback">
                        {{ error }}
                      </div>
                    {% endfor %}
                  {% else %}
                    {% render_field field class="form-control is-valid" %}
                  {% endif %}
                {% else %}
                  {% render_field field class="form-control" %}
                {% endif %}

                {% if field.help_text %}
                  <small class="form-text text-muted">{{ field.help_text }}</small>
                {% endif %}
              </div>
            {% endfor %}
                  <button type="submit" class="save btn btn-default">Save</button>
               </form>
        {% endblock %}
        </td>
    </tr>
</table>
    <script>
      // This example adds a user-editable rectangle to the map.
      // When the user changes the bounds of the rectangle,
      // an info window pops up displaying the new bounds.

      var rectangle;
      var map;
      var infoWindow;

      function getRectangleBounds() {
        var ne = rectangle.getBounds().getNorthEast();
        var sw = rectangle.getBounds().getSouthWest();

        document.getElementById("id_north_east_bound_0").value = ne.lat();
        document.getElementById("id_north_east_bound_1").value = ne.lng();
        document.getElementById("id_south_west_bound_0").value = sw.lat();
        document.getElementById("id_south_west_bound_1").value = sw.lng();
      }

      function setRectangle(lat, lng) {

        var bounds = {
          north: lat + 0.001,
          south: lat - 0.001,
          east: lng + 0.001,
          west: lng - 0.001,
        };

        // Define the rectangle and set its editable property to true.
        rectangle = new google.maps.Rectangle({
          bounds: bounds,
          editable: true,
          draggable: true
        });

        rectangle.setMap(map);
        getRectangleBounds();

        // Add an event listener on the rectangle.
        rectangle.addListener('bounds_changed', showNewRect);
    }

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 36.7090448, lng: -4.4791599},
          zoom: 15,
          disableDoubleClickZoom: true
        });

        map.addListener('dblclick', function(e) {
            if (rectangle) { rectangle.setMap(null); }
            setRectangle(e.latLng.lat(), e.latLng.lng());
        });

        // Define an info window on the map.
        infoWindow = new google.maps.InfoWindow();
      }
      // Show the new coordinates for the rectangle in an info window.

      /** @this {google.maps.Rectangle} */
      function showNewRect(event) {
        getRectangleBounds();
        var ne = rectangle.getBounds().getNorthEast();
        var sw = rectangle.getBounds().getSouthWest();

        var contentString = '<b>Rectangle moved.</b><br>' +
            'New north-east corner: ' + ne.lat() + ', ' + ne.lng() + '<br>' +
            'New south-west corner: ' + sw.lat() + ', ' + sw.lng();

        // Set the info window's content and position.
        infoWindow.setContent(contentString);
        infoWindow.setPosition(ne);

        infoWindow.open(map);
      }
    </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?address=Placename&key=AIzaSyAHCaVnPMaUAjAtjpINPxhmHfsr5876u6k&callback=initMap">
  </script>
  </body>
</html>
